name: PR Ready for Review

on:
  pull_request:
    types: [ready_for_review]

jobs:
  update-project:
    name: Set PR to Review Requested
    runs-on: ubuntu-latest
    steps:
      # 1. GitHub App Token ìƒì„±
      - name: Generate GitHub App Token
        id: generate-token
        uses: actions/create-github-app-token@v2
        with:
          app-id: ${{ secrets.CARO_BACKEND_APP_ID }}
          private-key: ${{ secrets.CARO_BACKEND_APP_PRIVATE_KEY }}

      # 2. í”„ë¡œì íŠ¸ ìƒíƒœë¥¼ "ğŸ’ŒReview Requested"ë¡œ ì„¤ì •
      - name: Set Status to Review Requested
        uses: github/update-project-action@v3
        with:
          github_token: ${{ steps.generate-token.outputs.token }}
          organization: ${{ github.repository_owner }}
          project_number: ${{ secrets.PROJECT_NUMBER }}
          content_id: ${{ github.event.pull_request.node_id }}
          field: Status
          value: ğŸ’ŒReview Requested
